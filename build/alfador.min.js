!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.alfador=t()}}(function(){return function t(a,i,s){function h(r,e){if(!i[r]){if(!a[r]){var d="function"==typeof require&&require;if(!e&&d)return d(r,!0);if(n)return n(r,!0);var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}var u=i[r]={exports:{}};a[r][0].call(u.exports,function(t){var i=a[r][1][t];return h(i?i:t)},u,u.exports,t,a,i,s)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<s.length;r++)h(s[r]);return h}({1:[function(t,a){!function(){"use strict";a.exports={Mat33:t("./Mat33"),Mat44:t("./Mat44"),Vec2:t("./Vec2"),Vec3:t("./Vec3"),Vec4:t("./Vec3"),Quaternion:t("./Quaternion"),Transform:t("./Transform")}}()},{"./Mat33":2,"./Mat44":3,"./Quaternion":4,"./Transform":5,"./Vec2":6,"./Vec3":7}],2:[function(t,a){!function(){"use strict";function i(t){if(!t)return i.identity();if(t instanceof i)this.data=t.data.slice(0);else if(t.data&&16===t.data.length)this.data=[t.data[0],t.data[1],t.data[2],t.data[4],t.data[5],t.data[6],t.data[8],t.data[9],t.data[10]];else{if(9!==t.length)return i.identity();this.data=Array.prototype.slice.call(t)}return this}var s=t("./Vec3"),h=t("./Vec4");i.prototype.row=function(t){return new s(this.data[0+t],this.data[3+t],this.data[6+t])},i.prototype.col=function(t){return new s(this.data[0+3*t],this.data[1+3*t],this.data[2+3*t])},i.identity=function(){return new i([1,0,0,0,1,0,0,0,1])},i.scale=function(t){return new i(t instanceof Array?[t[0],0,0,0,t[1],0,0,0,t[2]]:t instanceof s?[t.x,0,0,0,t.y,0,0,0,t.z]:[t,0,0,0,t,0,0,0,t])},i.rotationDegrees=function(t,a){return this.rotationRadians(t*Math.PI/180,a)},i.rotationRadians=function(t,a){if(a instanceof Array&&(a=new s(a)),0===a.lengthSquared())return this.identity();var h=a.normalize(),n=h.x,r=h.y,e=h.z,d=t>0?t%(2*Math.PI):t%(-2*Math.PI),o=Math.sin(d),u=Math.cos(d),f=n*n,c=r*r,y=e*e,l=n*r,p=r*e,w=e*n,x=n*o,m=r*o,z=e*o,_=1-u;return new i([_*f+u,_*l+z,_*w-m,_*l-z,_*c+u,_*p+x,_*w+m,_*p-x,_*y+u])},i.rotationFromTo=function(t,a){var h,n,r,e,d,o,u,f,c,y,l,p=1e-6,w=new s(t).normalize(),x=new s(a).normalize(),m=w.dot(x),z=Math.abs(m),_=new i;return z>1-p?(e=Math.abs(w.x),d=Math.abs(w.y),o=Math.abs(w.z),h=d>e?o>e?new s(1,0,0):new s(0,0,1):o>d?new s(0,1,0):new s(0,0,1),n=h.sub(w),r=h.sub(x),c=2/n.dot(n),y=2/r.dot(r),l=c*y*n.dot(r),_.data[0]=-c*n.x*n.x-y*r.x*r.x+l*r.x*n.x,_.data[3]=-c*n.x*n.y-y*r.x*r.y+l*r.x*n.y,_.data[6]=-c*n.x*n.z-y*r.x*r.z+l*r.x*n.z,_.data[1]=-c*n.y*n.x-y*r.y*r.x+l*r.y*n.x,_.data[4]=-c*n.y*n.y-y*r.y*r.y+l*r.y*n.y,_.data[7]=-c*n.y*n.z-y*r.y*r.z+l*r.y*n.z,_.data[2]=-c*n.z*n.x-y*r.z*r.x+l*r.z*n.x,_.data[5]=-c*n.z*n.y-y*r.z*r.y+l*r.z*n.y,_.data[8]=-c*n.z*n.z-y*r.z*r.z+l*r.z*n.z,_.data[0]+=1,_.data[4]+=1,_.data[8]+=1):(r=w.cross(x),n=1/(1+m),u=n*r.x,f=n*r.z,c=u*r.y,y=u*r.z,l=f*r.y,_.data[0]=m+u*r.x,_.data[3]=c-r.z,_.data[6]=y+r.y,_.data[1]=c+r.z,_.data[4]=m+n*r.y*r.y,_.data[7]=l-r.x,_.data[2]=y-r.y,_.data[5]=l+r.x,_.data[8]=m+f*r.z),_},i.prototype.add=function(t){var a,s=new i(t);for(a=0;9>a;a++)s.data[a]+=this.data[a];return s},i.prototype.sub=function(t){var a,s=new i(t);for(a=0;9>a;a++)s.data[a]=this.data[a]-s.data[a];return s},i.prototype.multVector=function(t){return new s({x:this.data[0]*t.x+this.data[3]*t.y+this.data[6]*t.z,y:this.data[1]*t.x+this.data[4]*t.y+this.data[7]*t.z,z:this.data[2]*t.x+this.data[5]*t.y+this.data[8]*t.z})},i.prototype.multScalar=function(t){var a,s=new i;for(a=0;9>a;a++)s.data[a]=this.data[a]*t;return s},i.prototype.multMatrix=function(t){var a,s=new i;for(t=t instanceof i?t:new i(t),a=0;3>a;a++)s.data[a]=this.data[a]*t.data[0]+this.data[a+3]*t.data[1]+this.data[a+6]*t.data[2],s.data[a+3]=this.data[a]*t.data[3]+this.data[a+3]*t.data[4]+this.data[a+6]*t.data[5],s.data[a+6]=this.data[a]*t.data[6]+this.data[a+3]*t.data[7]+this.data[a+6]*t.data[8];return s},i.prototype.mult=function(t){return"number"==typeof t?this.multScalar(t):t instanceof Array?this.multVector(new s(t)):t instanceof s||t instanceof h?this.multVector(t):this.multMatrix(t)},i.prototype.div=function(t){var a,s=new i;for(a=0;9>a;a++)s.data[a]=this.data[a]/t;return s},i.prototype.equals=function(t,a){var i;for(a=void 0===a?0:a,i=0;9>i;i++)if(!(this.data[i]===t.data[i]||Math.abs(this.data[i]-t.data[i])<=a))return!1;return!0},i.prototype.transpose=function(){var t,a=new i;for(t=0;3>t;t++)a.data[3*t]=this.data[t],a.data[3*t+1]=this.data[t+3],a.data[3*t+2]=this.data[t+6];return a},i.prototype.inverse=function(){var t,a=new i;return a.data[0]=this.data[4]*this.data[8]-this.data[7]*this.data[5],a.data[3]=-this.data[3]*this.data[8]+this.data[6]*this.data[5],a.data[6]=this.data[3]*this.data[7]-this.data[6]*this.data[4],a.data[1]=-this.data[1]*this.data[8]+this.data[7]*this.data[2],a.data[4]=this.data[0]*this.data[8]-this.data[6]*this.data[2],a.data[7]=-this.data[0]*this.data[7]+this.data[6]*this.data[1],a.data[2]=this.data[1]*this.data[5]-this.data[4]*this.data[2],a.data[5]=-this.data[0]*this.data[5]+this.data[3]*this.data[2],a.data[8]=this.data[0]*this.data[4]-this.data[3]*this.data[1],t=this.data[0]*a.data[0]+this.data[1]*a.data[3]+this.data[2]*a.data[6],a.mult(1/t)},i.prototype.decompose=function(){var t=this.col(0),a=this.col(1),i=this.col(2);return{up:a.normalize(),forward:i.normalize(),left:t.normalize(),scale:new s(t.length(),a.length(),i.length())}},i.random=function(){var t=i.rotationRadians(360*Math.random(),s.random()),a=i.scale(10*Math.random());return t.mult(a)},i.prototype.toString=function(){return this.data[0]+", "+this.data[3]+", "+this.data[6]+",\n"+this.data[1]+", "+this.data[4]+", "+this.data[7]+",\n"+this.data[2]+", "+this.data[5]+", "+this.data[8]},i.prototype.toArray=function(){return this.data.slice(0)},a.exports=i}()},{"./Vec3":7,"./Vec4":8}],3:[function(t,a){!function(){"use strict";function i(t){if(!t)return i.identity();if(t instanceof n)this.data=[t.data[0],t.data[1],t.data[2],0,t.data[3],t.data[4],t.data[5],0,t.data[6],t.data[7],t.data[8],0,0,0,0,1];else if(t instanceof i)this.data=t.data.slice(0);else{if(16!==t.length)return i.identity();this.data=Array.prototype.slice.call(t)}return this}var s=t("./Vec3"),h=t("./Vec4"),n=t("./Mat33");i.prototype.row=function(t){return new h(this.data[0+t],this.data[4+t],this.data[8+t],this.data[12+t])},i.prototype.col=function(t){return new h(this.data[0+4*t],this.data[1+4*t],this.data[2+4*t],this.data[3+4*t])},i.identity=function(){return new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},i.scale=function(t){return new i(t instanceof Array?[t[0],0,0,0,0,t[1],0,0,0,0,t[2],0,0,0,0,1]:t instanceof s?[t.x,0,0,0,0,t.y,0,0,0,0,t.z,0,0,0,0,1]:[t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1])},i.translation=function(t){return new i(t instanceof Array?[1,0,0,0,0,1,0,0,0,0,1,0,t[0],t[1],t[2],1]:[1,0,0,0,0,1,0,0,0,0,1,0,t.x,t.y,t.z,1])},i.rotationDegrees=function(t,a){return new i(n.rotationDegrees(t,a))},i.rotationRadians=function(t,a){return new i(n.rotationRadians(t,a))},i.rotationFromTo=function(t,a){return new i(n.rotationFromTo(t,a))},i.prototype.add=function(t){var a,s=new i(t);for(a=0;16>a;a++)s.data[a]+=this.data[a];return s},i.prototype.sub=function(t){var a,s=new i(t);for(a=0;16>a;a++)s.data[a]=this.data[a]-s.data[a];return s},i.prototype.multVector3=function(t){return new s({x:this.data[0]*t.x+this.data[4]*t.y+this.data[8]*t.z+this.data[12],y:this.data[1]*t.x+this.data[5]*t.y+this.data[9]*t.z+this.data[13],z:this.data[2]*t.x+this.data[6]*t.y+this.data[10]*t.z+this.data[14]})},i.prototype.multVector4=function(t){return new h({x:this.data[0]*t.x+this.data[4]*t.y+this.data[8]*t.z+this.data[12]*t.w,y:this.data[1]*t.x+this.data[5]*t.y+this.data[9]*t.z+this.data[13]*t.w,z:this.data[2]*t.x+this.data[6]*t.y+this.data[10]*t.z+this.data[14]*t.w,w:this.data[3]*t.x+this.data[7]*t.y+this.data[11]*t.z+this.data[15]*t.w})},i.prototype.multScalar=function(t){var a,s=new i;for(a=0;16>a;a++)s.data[a]=this.data[a]*t;return s},i.prototype.multMatrix=function(t){var a,s=new i;for(t=t instanceof i?t:new i(t),a=0;4>a;a++)s.data[a]=this.data[a]*t.data[0]+this.data[a+4]*t.data[1]+this.data[a+8]*t.data[2]+this.data[a+12]*t.data[3],s.data[a+4]=this.data[a]*t.data[4]+this.data[a+4]*t.data[5]+this.data[a+8]*t.data[6]+this.data[a+12]*t.data[7],s.data[a+8]=this.data[a]*t.data[8]+this.data[a+4]*t.data[9]+this.data[a+8]*t.data[10]+this.data[a+12]*t.data[11],s.data[a+12]=this.data[a]*t.data[12]+this.data[a+4]*t.data[13]+this.data[a+8]*t.data[14]+this.data[a+12]*t.data[15];return s},i.prototype.mult=function(t){return"number"==typeof t?this.multScalar(t):t instanceof Array?3===t.length?this.multVector3(new s(t)):this.multVector4(new h(t)):t instanceof s?this.multVector3(t):t instanceof h?this.multVector4(new i(t)):this.multMatrix(t)},i.prototype.div=function(t){var a,s=new i;for(a=0;16>a;a++)s.data[a]=this.data[a]/t;return s},i.prototype.equals=function(t,a){var i;for(a=void 0===a?0:a,i=0;16>i;i++)if(!(this.data[i]===t.data[i]||Math.abs(this.data[i]-t.data[i])<=a))return!1;return!0},i.ortho=function(t,a,s,h,n,r){var e=i.identity();return e.data[0]=2/(a-t),e.data[5]=2/(h-s),e.data[10]=-2/(r-n),e.data[12]=-((a+t)/(a-t)),e.data[13]=-((h+s)/(h-s)),e.data[14]=-((r+n)/(r-n)),e},i.perspective=function(t,a,s,h){var n=s*Math.tan(t*(Math.PI/360)),r=-n,e=r*a,d=-e,o=i.identity();return o.data[0]=2*s/(d-e),o.data[5]=2*s/(n-r),o.data[8]=(d+e)/(d-e),o.data[9]=(n+r)/(n-r),o.data[10]=-((h+s)/(h-s)),o.data[11]=-1,o.data[14]=-(2*h*s/(h-s)),o.data[15]=0,o},i.prototype.transpose=function(){var t,a=new i;for(t=0;4>t;t++)a.data[4*t]=this.data[t],a.data[4*t+1]=this.data[t+4],a.data[4*t+2]=this.data[t+8],a.data[4*t+3]=this.data[t+12];return a},i.prototype.inverse=function(){var t,a=new i;return a.data[0]=this.data[5]*this.data[10]*this.data[15]-this.data[5]*this.data[11]*this.data[14]-this.data[9]*this.data[6]*this.data[15]+this.data[9]*this.data[7]*this.data[14]+this.data[13]*this.data[6]*this.data[11]-this.data[13]*this.data[7]*this.data[10],a.data[4]=-this.data[4]*this.data[10]*this.data[15]+this.data[4]*this.data[11]*this.data[14]+this.data[8]*this.data[6]*this.data[15]-this.data[8]*this.data[7]*this.data[14]-this.data[12]*this.data[6]*this.data[11]+this.data[12]*this.data[7]*this.data[10],a.data[8]=this.data[4]*this.data[9]*this.data[15]-this.data[4]*this.data[11]*this.data[13]-this.data[8]*this.data[5]*this.data[15]+this.data[8]*this.data[7]*this.data[13]+this.data[12]*this.data[5]*this.data[11]-this.data[12]*this.data[7]*this.data[9],a.data[12]=-this.data[4]*this.data[9]*this.data[14]+this.data[4]*this.data[10]*this.data[13]+this.data[8]*this.data[5]*this.data[14]-this.data[8]*this.data[6]*this.data[13]-this.data[12]*this.data[5]*this.data[10]+this.data[12]*this.data[6]*this.data[9],a.data[1]=-this.data[1]*this.data[10]*this.data[15]+this.data[1]*this.data[11]*this.data[14]+this.data[9]*this.data[2]*this.data[15]-this.data[9]*this.data[3]*this.data[14]-this.data[13]*this.data[2]*this.data[11]+this.data[13]*this.data[3]*this.data[10],a.data[5]=this.data[0]*this.data[10]*this.data[15]-this.data[0]*this.data[11]*this.data[14]-this.data[8]*this.data[2]*this.data[15]+this.data[8]*this.data[3]*this.data[14]+this.data[12]*this.data[2]*this.data[11]-this.data[12]*this.data[3]*this.data[10],a.data[9]=-this.data[0]*this.data[9]*this.data[15]+this.data[0]*this.data[11]*this.data[13]+this.data[8]*this.data[1]*this.data[15]-this.data[8]*this.data[3]*this.data[13]-this.data[12]*this.data[1]*this.data[11]+this.data[12]*this.data[3]*this.data[9],a.data[13]=this.data[0]*this.data[9]*this.data[14]-this.data[0]*this.data[10]*this.data[13]-this.data[8]*this.data[1]*this.data[14]+this.data[8]*this.data[2]*this.data[13]+this.data[12]*this.data[1]*this.data[10]-this.data[12]*this.data[2]*this.data[9],a.data[2]=this.data[1]*this.data[6]*this.data[15]-this.data[1]*this.data[7]*this.data[14]-this.data[5]*this.data[2]*this.data[15]+this.data[5]*this.data[3]*this.data[14]+this.data[13]*this.data[2]*this.data[7]-this.data[13]*this.data[3]*this.data[6],a.data[6]=-this.data[0]*this.data[6]*this.data[15]+this.data[0]*this.data[7]*this.data[14]+this.data[4]*this.data[2]*this.data[15]-this.data[4]*this.data[3]*this.data[14]-this.data[12]*this.data[2]*this.data[7]+this.data[12]*this.data[3]*this.data[6],a.data[10]=this.data[0]*this.data[5]*this.data[15]-this.data[0]*this.data[7]*this.data[13]-this.data[4]*this.data[1]*this.data[15]+this.data[4]*this.data[3]*this.data[13]+this.data[12]*this.data[1]*this.data[7]-this.data[12]*this.data[3]*this.data[5],a.data[14]=-this.data[0]*this.data[5]*this.data[14]+this.data[0]*this.data[6]*this.data[13]+this.data[4]*this.data[1]*this.data[14]-this.data[4]*this.data[2]*this.data[13]-this.data[12]*this.data[1]*this.data[6]+this.data[12]*this.data[2]*this.data[5],a.data[3]=-this.data[1]*this.data[6]*this.data[11]+this.data[1]*this.data[7]*this.data[10]+this.data[5]*this.data[2]*this.data[11]-this.data[5]*this.data[3]*this.data[10]-this.data[9]*this.data[2]*this.data[7]+this.data[9]*this.data[3]*this.data[6],a.data[7]=this.data[0]*this.data[6]*this.data[11]-this.data[0]*this.data[7]*this.data[10]-this.data[4]*this.data[2]*this.data[11]+this.data[4]*this.data[3]*this.data[10]+this.data[8]*this.data[2]*this.data[7]-this.data[8]*this.data[3]*this.data[6],a.data[11]=-this.data[0]*this.data[5]*this.data[11]+this.data[0]*this.data[7]*this.data[9]+this.data[4]*this.data[1]*this.data[11]-this.data[4]*this.data[3]*this.data[9]-this.data[8]*this.data[1]*this.data[7]+this.data[8]*this.data[3]*this.data[5],a.data[15]=this.data[0]*this.data[5]*this.data[10]-this.data[0]*this.data[6]*this.data[9]-this.data[4]*this.data[1]*this.data[10]+this.data[4]*this.data[2]*this.data[9]+this.data[8]*this.data[1]*this.data[6]-this.data[8]*this.data[2]*this.data[5],t=this.data[0]*a.data[0]+this.data[1]*a.data[4]+this.data[2]*a.data[8]+this.data[3]*a.data[12],a.mult(1/t)},i.prototype.decompose=function(){var t=new s(this.col(0)),a=new s(this.col(1)),i=new s(this.col(2)),h=new s(this.col(3));return{up:a.normalize(),forward:i.normalize(),left:t.normalize(),origin:h,scale:new s(t.length(),a.length(),i.length())}},i.random=function(){var t=i.rotationRadians(360*Math.random(),s.random()),a=i.scale(10*Math.random()),h=i.translation(s.random());return h.mult(t.mult(a))},i.prototype.toString=function(){return this.data[0]+", "+this.data[4]+", "+this.data[8]+", "+this.data[12]+",\n"+this.data[1]+", "+this.data[5]+", "+this.data[9]+", "+this.data[13]+",\n"+this.data[2]+", "+this.data[6]+", "+this.data[10]+", "+this.data[14]+",\n"+this.data[3]+", "+this.data[7]+", "+this.data[11]+", "+this.data[15]},i.prototype.toArray=function(){return this.data.slice(0)},a.exports=i}()},{"./Mat33":2,"./Vec3":7,"./Vec4":8}],4:[function(t,a){!function(){"use strict";function i(){switch(arguments.length){case 1:var t=arguments[0];this.w=void 0!==t.w?t.w:void 0!==t[0]?t[0]:1,this.x=t.x||t[1]||0,this.y=t.y||t[2]||0,this.z=t.z||t[3]||0;break;case 4:this.w=arguments[0],this.x=arguments[1],this.y=arguments[2],this.z=arguments[3];break;default:this.w=1,this.x=0,this.y=0,this.z=0}return this}var s=t("./Vec3"),h=t("./Mat33");i.identity=function(){return new i(1,0,0,0)},i.prototype.multQuaternion=function(t){var a=t.w*this.w-t.x*this.x-t.y*this.y-t.z*this.z,s=this.y*t.z-this.z*t.y+this.w*t.x+this.x*t.w,h=this.z*t.x-this.x*t.z+this.w*t.y+this.y*t.w,n=this.x*t.y-this.y*t.x+this.w*t.z+this.z*t.w;return new i(a,s,h,n)},i.prototype.multVector=function(t){var a=new i(0,t.x,t.y,t.z),h=this.multQuaternion(a).multQuaternion(this.inverse());return new s(h.x,h.y,h.z)},i.prototype.mult=function(t){return t instanceof s?this.multVector(t):this.multQuaternion(t)},i.prototype.matrix=function(){var t=this.x*this.x,a=this.y*this.y,i=this.z*this.z,s=this.x*this.y,n=this.x*this.z,r=this.x*this.w,e=this.y*this.z,d=this.y*this.w,o=this.z*this.w;return new h([1-2*a-2*i,2*s+2*o,2*n-2*d,2*s-2*o,1-2*t-2*i,2*e+2*r,2*n+2*d,2*e-2*r,1-2*t-2*a])},i.rotationDegrees=function(t,a){return i.rotationRadians(t*(Math.PI/180),a)},i.rotationRadians=function(t,a){t=t>0?t%(2*Math.PI):t%(-2*Math.PI),a=a.normalize();var s=Math.sin(t/2),h=Math.cos(t/2);return new i(h,a.x*s,a.y*s,a.z*s).normalize()},i.prototype.length=function(){return Math.sqrt(this.lengthSquared())},i.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},i.prototype.equals=function(t,a){return a=void 0===a?0:a,(this.x===t.x||Math.abs(this.x-t.x)<=a)&&(this.y===t.y||Math.abs(this.y-t.y)<=a)&&(this.z===t.z||Math.abs(this.z-t.z)<=a)&&(this.w===t.w||Math.abs(this.w-t.w)<=a)},i.prototype.normalize=function(){var t=this.length();return 0!==t?new i(this.w/t,this.x/t,this.y/t,this.z/t):new i},i.prototype.conjugate=function(){return new i(this.w,-this.x,-this.y,-this.z)},i.prototype.inverse=function(){return this.conjugate()},i.random=function(){var t=s.random().normalize(),a=Math.random();return i.rotationRadians(a,t)},i.prototype.toString=function(){return this.x+", "+this.y+", "+this.z+", "+this.w},i.prototype.toArray=function(){return[this.x,this.y,this.z,this.w]},a.exports=i}()},{"./Mat33":2,"./Vec3":7}],5:[function(t,a){!function(){"use strict";function i(t){return t=t||{},t instanceof i?(this._up=t.up(),this._forward=t.forward(),this._left=t.left(),this._origin=t.origin(),this._scale=t.scale()):t instanceof n||t instanceof h?(t=t.decompose(),this._up=t.up,this._forward=t.forward,this._left=t.left,this._scale=t.scale,this._origin=t.origin||o):(this._up=t.up?new s(t.up).normalize():r,this._forward=t.forward?new s(t.forward).normalize():e,this._left=t.left?new s(t.left).normalize():this._up.cross(this._forward).normalize(),this.origin(t.origin||o),this.scale(t.scale||u)),this}var s=t("./Vec3"),h=t("./Mat33"),n=t("./Mat44"),r=new s(0,1,0),e=new s(0,0,1),d=new s(1,0,0),o=new s(0,0,0),u=new s(1,1,1);i.identity=function(){return new i({up:r,forward:e,left:d,origin:o,scale:u})},i.prototype.origin=function(t){return t?(this._origin=new s(t),this):new s(this._origin)},i.prototype.forward=function(t){if(t){t=t instanceof Array?new s(t).normalize():t.normalize();var a=h.rotationFromTo(this._forward,t);return this._forward=t,this._up=a.mult(this._up).normalize(),this._left=a.mult(this._left).normalize(),this}return new s(this._forward)},i.prototype.up=function(t){if(t){t=t instanceof Array?new s(t).normalize():t.normalize();var a=h.rotationFromTo(this._up,t);return this._forward=a.mult(this._forward).normalize(),this._up=t,this._left=a.mult(this._left).normalize(),this}return new s(this._up)},i.prototype.left=function(t){if(t){t=t instanceof Array?new s(t).normalize():t.normalize();var a=h.rotationFromTo(this._left,t);return this._forward=a.mult(this._forward).normalize(),this._up=a.mult(this._up).normalize(),this._left=t,this}return new s(this._left)},i.prototype.scale=function(t){return t?(this._scale="number"==typeof t?new s(t,t,t):new s(t),this):this._scale},i.prototype.mult=function(t){return t instanceof i?new i(this.matrix().mult(t.matrix())):t instanceof h||t instanceof n?new i(this.matrix().mult(t)):i.identity()},i.prototype.scaleMatrix=function(){return n.scale(this._scale)},i.prototype.rotationMatrix=function(){return new n([this._left.x,this._left.y,this._left.z,0,this._up.x,this._up.y,this._up.z,0,this._forward.x,this._forward.y,this._forward.z,0,0,0,0,1])},i.prototype.translationMatrix=function(){return n.translation(this._origin)},i.prototype.inverseScaleMatrix=function(){return n.scale(new s(1/this._scale.x,1/this._scale.y,1/this._scale.z))},i.prototype.inverseRotationMatrix=function(){return new n([this._left.x,this._up.x,this._forward.x,0,this._left.y,this._up.y,this._forward.y,0,this._left.z,this._up.z,this._forward.z,0,0,0,0,1])},i.prototype.inverseTranslationMatrix=function(){return n.translation(new s(-this._origin.x,-this._origin.y,-this._origin.z))},i.prototype.matrix=function(){return this.translationMatrix().mult(this.rotationMatrix()).mult(this.scaleMatrix())},i.prototype.inverseMatrix=function(){return this.inverseScaleMatrix().mult(this.inverseRotationMatrix()).mult(this.inverseTranslationMatrix())},i.prototype.viewMatrix=function(){var t=new s(-this._origin.x,-this._origin.y,-this._origin.z),a=new s(-this._left.x,-this._left.y,-this._left.z),i=new s(-this._forward.x,-this._forward.y,-this._forward.z);return new n([-this._left.x,this._up.x,-this._forward.x,0,-this._left.y,this._up.y,-this._forward.y,0,-this._left.z,this._up.z,-this._forward.z,0,t.dot(a),t.dot(this._up),t.dot(i),1])},i.prototype.translateWorld=function(t){return this._origin=this._origin.add(t),this},i.prototype.translateLocal=function(t){return t=t instanceof Array?new s(t):t,this._origin=this._origin.add(this._left.mult(t.x)),this._origin=this._origin.add(this._up.mult(t.y)),this._origin=this._origin.add(this._forward.mult(t.z)),this},i.prototype.rotateWorldDegrees=function(t,a){return this.rotateWorldRadians(t*Math.PI/180,a)},i.prototype.rotateWorldRadians=function(t,a){var i=h.rotationRadians(t,a);return this._up=i.mult(this._up),this._forward=i.mult(this._forward),this._left=i.mult(this._left),this},i.prototype.rotateLocalDegrees=function(t,a){return this.rotateWorldDegrees(t,this.rotationMatrix().mult(a))},i.prototype.rotateLocalRadians=function(t,a){return this.rotateWorldRadians(t,this.rotationMatrix().mult(a))},i.prototype.localToWorld=function(t,a,i,s){var h=new n;return a||(h=this.scaleMatrix().mult(h)),i||(h=this.rotationMatrix().mult(h)),s||(h=this.translationMatrix().mult(h)),h.mult(t)},i.prototype.worldToLocal=function(t,a,i,s){var h=new n;return s||(h=this.inverseTranslationMatrix().mult(h)),i||(h=this.inverseRotationMatrix().mult(h)),a||(h=this.inverseScaleMatrix().mult(h)),h.mult(t)},i.prototype.equals=function(t,a){return this._origin.equals(t.origin(),a)&&this._forward.equals(t.forward(),a)&&this._up.equals(t.up(),a)&&this._left.equals(t.left(),a)&&this._scale.equals(t.scale(),a)},i.random=function(){return(new i).origin(s.random()).forward(s.random()).scale(s.random())},i.prototype.toString=function(){return this.matrix().toString()},a.exports=i}()},{"./Mat33":2,"./Mat44":3,"./Vec3":7}],6:[function(t,a){!function(){"use strict";function t(){switch(arguments.length){case 1:var t=arguments[0];this.x=t.x||t[0]||0,this.y=t.y||t[1]||0;break;case 2:this.x=arguments[0],this.y=arguments[1];break;default:this.x=0,this.y=0}return this}t.prototype.add=function(a){return a instanceof Array?new t(this.x+a[0],this.y+a[1]):new t(this.x+a.x,this.y+a.y)},t.prototype.sub=function(a){return a instanceof Array?new t(this.x-a[0],this.y-a[1]):new t(this.x-a.x,this.y-a.y)},t.prototype.mult=function(a){return new t(this.x*a,this.y*a)},t.prototype.div=function(a){return new t(this.x/a,this.y/a)},t.prototype.dot=function(t){return t instanceof Array?this.x*t[0]+this.y*t[1]:this.x*t.x+this.y*t.y},t.prototype.length=function(t){return void 0===t?Math.sqrt(this.dot(this)):this.normalize().mult(t)},t.prototype.lengthSquared=function(){return this.dot(this)},t.prototype.equals=function(t,a){return a=void 0===a?0:a,(this.x===t.x||Math.abs(this.x-t.x)<=a)&&(this.y===t.y||Math.abs(this.y-t.y)<=a)},t.prototype.cross=function(t){return t instanceof Array?this.x*t[1]-this.y*t[0]:this.x*t.y-this.y*t.x},t.prototype.normalize=function(){var a=this.length();return 0!==a?new t(this.x/a,this.y/a):new t},t.random=function(){return new t(Math.random(),Math.random()).normalize()},t.prototype.toString=function(){return this.x+", "+this.y},t.prototype.toArray=function(){return[this.x,this.y]},a.exports=t}()},{}],7:[function(t,a){!function(){"use strict";function t(){switch(arguments.length){case 1:var t=arguments[0];this.x=t.x||t[0]||0,this.y=t.y||t[1]||0,this.z=t.z||t[2]||0;break;case 3:this.x=arguments[0],this.y=arguments[1],this.z=arguments[2];break;default:this.x=0,this.y=0,this.z=0}return this}t.prototype.add=function(a){return a instanceof Array?new t(this.x+a[0],this.y+a[1],this.z+a[2]):new t(this.x+a.x,this.y+a.y,this.z+a.z)},t.prototype.sub=function(a){return a instanceof Array?new t(this.x-a[0],this.y-a[1],this.z-a[2]):new t(this.x-a.x,this.y-a.y,this.z-a.z)},t.prototype.mult=function(a){return new t(this.x*a,this.y*a,this.z*a)},t.prototype.div=function(a){return new t(this.x/a,this.y/a,this.z/a)},t.prototype.dot=function(t){return t instanceof Array?this.x*t[0]+this.y*t[1]+this.z*t[2]:this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.length=function(t){return void 0===t?Math.sqrt(this.dot(this)):this.normalize().mult(t)},t.prototype.lengthSquared=function(){return this.dot(this)},t.prototype.equals=function(t,a){return a=void 0===a?0:a,(this.x===t.x||Math.abs(this.x-t.x)<=a)&&(this.y===t.y||Math.abs(this.y-t.y)<=a)&&(this.z===t.z||Math.abs(this.z-t.z)<=a)},t.prototype.cross=function(a){return a instanceof Array?new t(this.y*a[2]-a[1]*this.z,-this.x*a[2]+a[0]*this.z,this.x*a[1]-a[0]*this.y):new t(this.y*a.z-a.y*this.z,-this.x*a.z+a.x*this.z,this.x*a.y-a.x*this.y)},t.prototype.normalize=function(){var a=this.length();return 0!==a?new t(this.x/a,this.y/a,this.z/a):new t},t.random=function(){return new t(Math.random(),Math.random(),Math.random()).normalize()},t.prototype.toString=function(){return this.x+", "+this.y+", "+this.z},t.prototype.toArray=function(){return[this.x,this.y,this.z]},a.exports=t}()},{}],8:[function(t,a){!function(){"use strict";function t(){switch(arguments.length){case 1:var t=arguments[0];this.x=t.x||t[0]||0,this.y=t.y||t[1]||0,this.z=t.z||t[2]||0,this.w=t.w||t[3]||0;break;case 4:this.x=arguments[0],this.y=arguments[1],this.z=arguments[2],this.w=arguments[3];break;default:this.x=0,this.y=0,this.z=0,this.w=0}return this}t.prototype.add=function(a){return a instanceof Array?new t(this.x+a[0],this.y+a[1],this.z+a[2],this.w+a[3]):new t(this.x+a.x,this.y+a.y,this.z+a.z,this.w+a.w)},t.prototype.sub=function(a){return a instanceof Array?new t(this.x-a[0],this.y-a[1],this.z-a[2],this.w-a[3]):new t(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},t.prototype.mult=function(a){return new t(this.x*a,this.y*a,this.z*a,this.w*a)},t.prototype.div=function(a){return new t(this.x/a,this.y/a,this.z/a,this.w/a)},t.prototype.dot=function(t){return t instanceof Array?this.x*t[0]+this.y*t[1]+this.z*t[2]+this.w*t[3]:this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},t.prototype.length=function(t){return void 0===t?Math.sqrt(this.dot(this)):this.normalize().mult(t)},t.prototype.lengthSquared=function(){return this.dot(this)},t.prototype.equals=function(t,a){return a=void 0===a?0:a,(this.x===t.x||Math.abs(this.x-t.x)<=a)&&(this.y===t.y||Math.abs(this.y-t.y)<=a)&&(this.z===t.z||Math.abs(this.z-t.z)<=a)&&(this.w===t.w||Math.abs(this.w-t.w)<=a)},t.prototype.normalize=function(){var a=this.length();return 0!==a?new t(this.x/a,this.y/a,this.z/a,this.w/a):new t},t.random=function(){return new t(Math.random(),Math.random(),Math.random(),Math.random()).normalize()},t.prototype.toString=function(){return this.x+", "+this.y+", "+this.z+", "+this.w},t.prototype.toArray=function(){return[this.x,this.y,this.z,this.w]},a.exports=t}()},{}]},{},[1])(1)});